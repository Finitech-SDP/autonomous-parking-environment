(this["webpackJsonpoperations-monitor"]=this["webpackJsonpoperations-monitor"]||[]).push([[0],{103:function(e,t,n){e.exports=n(182)},153:function(e,t,n){e.exports=n.p+"static/media/racecar.e66ab204.svg"},154:function(e,t,n){e.exports=n.p+"static/media/parking-sign.013e9a4f.svg"},155:function(e,t,n){e.exports=n.p+"static/media/robot.3f20bb4e.svg"},156:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(27),o=n.n(i),l=n(36),s=n.n(l),c=n(46),d=n(99),h=n(83),g=n(84),f=n(100),u=n(85),p=n(28),C=n(101),m=n(44),b=n(13);var y=function(e){var t=e.robotPath,n=e.parkingLotOffset,a=e.debugGridCellSize,i=[];return t.forEach((function(e){var t=n.x+e.i*a.width+a.width/2,r=n.y+e.j*a.height+a.height/2;i.push(t),i.push(r)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.Arrow,{points:i,shadowBlur:3,stroke:"black",strokeWidth:1.7}))},R=n(86),T=n(39),I=n.n(T),A=n(153),w=n(154);var v=function(e){var t=e.spacesAvailable,n=e.debugGridCellSize,a=e.offset,i=e.debugMode,o=I()(A),l=Object(m.a)(o,1)[0],s=I()(w),c=Object(m.a)(s,1)[0];return R.map((function(e,o){var s=null,d=null,h=!1;switch(e.type){case"parking":s=r.a.createElement(b.Group,{key:o},r.a.createElement(b.Rect,{x:a.x+e.x*n.width,y:a.y+e.y*n.height,width:n.width,height:n.height,fillRadialGradientStartPoint:{x:n.width/2,y:n.height/2},fillRadialGradientEndPoint:{x:n.width/2,y:n.height/2},fillRadialGradientStartRadius:n.width>n.height?n.height:n.width,fillRadialGradientColorStops:t.includes("R"+e.y+"C"+e.x)?[0,"rgba(63,145,60)",1,"rgba(103,233,98)"]:[0,"rgba(141,38,38)",1,"rgba(230,67,67)"],shadowBlur:5,stroke:"black",strokeWidth:3}),r.a.createElement(b.Image,{x:a.x+e.x*n.width+n.width/2.6,y:a.y+e.y*n.height+n.height/3.5,image:c,shadowBlur:5}),t.includes("R"+e.y+"C"+e.x)?null:r.a.createElement(b.Image,{x:a.x+e.x*n.width+30,y:a.y+e.y*n.height-40,image:l,shadowBlur:5})),d="Parking space",h=!0;break;case"hub":s=r.a.createElement(r.a.Fragment,null,r.a.createElement(b.Rect,{x:a.x+e.x*n.width,y:a.y+e.y*n.height,width:n.width,height:n.height,fillRadialGradientStartPoint:{x:n.width/2,y:n.height/2},fillRadialGradientEndPoint:{x:n.width/2,y:n.height/2},fillRadialGradientStartRadius:n.width>n.height?n.height:n.width,fillRadialGradientColorStops:[0,"rgb(14, 82, 165)",1,"rgb(19, 115, 236)"],shadowBlur:5,stroke:"black",strokeWidth:3}),t.includes("R"+e.y+"C"+e.x)?null:r.a.createElement(b.Image,{x:a.x+e.x*n.width+30,y:a.y+e.y*n.height-40,image:l,shadowBlur:5})),d="Hub",h=!0;break;case"road":d="Road";break;case"blocked":d="Blocked space"}return r.a.createElement(b.Group,{key:o},s,i?r.a.createElement(b.Group,null,r.a.createElement(b.Rect,{x:a.x+e.x*n.width,y:a.y+e.y*n.height,width:n.width,height:n.height,fill:"rgba(255, 255, 255, 0.3)",shadowBlur:5,stroke:"black",strokeWidth:3}),r.a.createElement(b.Text,{x:a.x+e.x*n.width+n.width/10,y:a.y+e.y*n.height+n.height/12,text:"R"+e.y+"C"+e.x+" ("+d+")",fontSize:20}),r.a.createElement(b.Text,{x:a.x+e.x*n.width+n.width/10,y:a.y+e.y*n.height+n.height/1.25,text:h?"Status: "+("hub"===e.type?t.includes("R"+e.y+"C"+e.x)?"Available":"Awaiting Parking":"parking"===e.type?t.includes("R"+e.y+"C"+e.x)?"Available":"Occupied":null):null,fontSize:20})):null)}))},k=n(155);var x=function(e){var t=e.spacesAvailable,n=e.debugMode,a=e.robotPath,i=e.robotLocation,o=e.gridSize,l={height:750,width:401.4/288*750},s={x:(window.innerWidth-30)/2-l.width/2,y:50},c={height:l.height/o.x,width:l.width/o.y},d=I()(k),h=Object(m.a)(d,1)[0];return r.a.createElement("div",null,r.a.createElement(b.Stage,{width:1500,height:835},r.a.createElement(b.Layer,null,r.a.createElement(b.Shape,{x:s.x,y:s.y,sceneFunc:function(e,t){e.beginPath(),e.moveTo(250,0),e.lineTo(250,250),e.lineTo(0,250),e.lineTo(0,l.height),e.lineTo(l.width,l.height),e.lineTo(l.width,0),e.closePath(),e.fillStrokeShape(t)},fillRadialGradientStartPoint:{x:l.width/2,y:l.height/2},fillRadialGradientEndPoint:{x:l.width/2,y:l.height/2},fillRadialGradientStartRadius:l.width>l.height?l.height:l.width,fillRadialGradientColorStops:[0,"rgb(190, 190, 190)",1,"rgb(255, 255, 255)"],stroke:"black",strokeWidth:5}),r.a.createElement(v,{spacesAvailable:t,debugMode:n,debugGridCellSize:c,offset:s}),r.a.createElement(y,{debugGridCellSize:c,robotPath:a,parkingLotOffset:s}),r.a.createElement(b.Image,{x:s.x+i.x*c.width+c.width/4,y:s.y+i.y*c.height,image:h,shadowBlur:5}))))};var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h3",{className:"mb-3"}," CCTV camera ")))};var O=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h3",null," Live stream from onboard Raspberry Pi cameras to be placed here")))},S=(n(156),n(91)),L=n(31),j=n(187),G=n(188),P=n(185),B=n(186),z=(n(157),n(184)),M=n(89);var D=function(e){var t=e.toggleSettings,n=e.show,a=e.changeGridSize;return r.a.createElement(z.a,{show:n,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(z.a.Header,null,r.a.createElement(z.a.Title,{id:"contained-modal-title-vcenter"},"Grid Settings")),r.a.createElement(z.a.Body,null,r.a.createElement("h4",null,"Centered Modal"),r.a.createElement("p",null,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.")),r.a.createElement(z.a.Footer,null,r.a.createElement(M.a,{variant:"secondary",onClick:t},"Close"),r.a.createElement(M.a,{onClick:function(){a(4,6)}},"Change Grid Dimensions")))},N=n(98),W=";; Authors: Theodor Amariucai & Bora M. Alper (in no particular order)\n\n(define (domain finitech)\n    (:requirements :adl :typing :negative-preconditions :strips)\n\n    (:types\n        blockedTile - tile  ;; physically inaccessible \n        roadTile - tile\n        parkingTile - tile\n        hubTile - tile\n        \n        car - dynamic  ;; cars can only be moved around with the help of the robot\n        robot - dynamic\n    )\n\n    (:predicates\n        ;; TODO: enforce that one and only one is true at a given time\n        (TemporarilyBlocked ?t - tile)\n\n        ;; The car is waiting to be parked\n        (AwaitingParking ?c - car)\n        ;; The car is waiting for delivery\n        (AwaitingDelivery ?c - car)\n        ;; Otherwise the car is waiting for its owner\n\n        ;; ?a IsToTheLeftOf/IsAbove ?b\n        (IsToTheLeftOf ?a - tile ?b - tile)\n        (IsAbove ?a - tile ?b - tile)\n\n        (IsAt ?m - dynamic ?t - tile)\n\n        (IsCarrying ?r - robot ?c - car)\n    )\n\n    ;;;;;; WE ASSUME HORIZONTAL TILES!\n\n    ;;;; Action Template - Delete and fill in own actions ;;;;\n    (:action go-left\n        :parameters (?r - robot ?f - tile ?t - roadTile)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?t ?f)\n            (not (TemporarilyBlocked ?t))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n        )\n    )\n\n    (:action go-right\n        :parameters (?r - robot ?f - tile ?t - roadTile)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?f ?t)\n            (not (TemporarilyBlocked ?t))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n        )\n    )\n\n    (:action go-up\n        :parameters (?r - robot ?f - roadTile ?t - roadTile)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsAbove ?t ?f)\n            (not (TemporarilyBlocked ?t))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n        )\n    )\n\n    (:action go-down\n        :parameters (?r - robot ?f - roadTile ?t - roadTile)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsAbove ?f ?t)\n            (not (TemporarilyBlocked ?t))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n        )\n    )\n\n    ;; 1) scan\n    ;; 2) slide under\n    ;; 3) lift\n    ;; END\n    (:action pickup-car-leftwards\n        :parameters (?r - robot ?f - roadTile ?t - hubTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsAt ?c ?t)\n            (IsToTheLeftOf ?t ?f)\n            \n            (not (exists (?c2 - car) (and (IsCarrying ?r ?c2))))\n            (AwaitingParking ?c)\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (not (IsAt ?c ?t))\n            (IsAt ?r ?t)\n            \n            (IsCarrying ?r ?c)\n        )\n    )\n\n    (:action dropoff-car-leftwards\n        :parameters (?r - robot ?f - roadTile ?t - hubTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?t ?f)\n            \n            (IsCarrying ?r ?c)\n            (not (exists (?c2 - car) (IsAt ?c2 ?t)))\n            ;; Necessary? (AwaitingDelivery ?c)\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n            (IsAt ?c ?t)\n            \n            (not (IsCarrying ?r ?c))\n            (not (AwaitingDelivery ?c))\n        )\n    )\n\n    (:action park-car-rightwards\n        :parameters (?r - robot ?f - roadTile ?t - parkingTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?f ?t)\n            \n            (not (exists (?c2 - car) (IsAt ?c2 ?t)))\n            (IsCarrying ?r ?c)\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n            \n            (not (IsCarrying ?r ?c))\n            (IsAt ?c ?t)\n            (not (AwaitingParking ?c))\n        )\n    )\n\n    (:action park-car-leftwards\n        :parameters (?r - robot ?f - roadTile ?t - parkingTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?t ?f)\n            \n            (not (exists (?c2 - car) (IsAt ?c2 ?t)))\n            (IsCarrying ?r ?c)\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n            \n            (not (IsCarrying ?r ?c))\n            (IsAt ?c ?t)\n            (not (AwaitingParking ?c))\n        )\n    )\n\n    ;;;;\n\n    (:action retrieve-car-rightwards\n        :parameters (?r - robot ?f - roadTile ?t - parkingTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?f ?t)\n            \n            (AwaitingDelivery ?c)\n            (IsAt ?c ?t)\n            \n            (not (exists (?c2 - car) (and\n                (IsCarrying ?r ?c2)\n            )))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n            \n            (not (IsAt ?c ?t))\n            (IsCarrying ?r ?c)\n        )\n    )\n\n    (:action retrieve-car-leftwards\n        :parameters (?r - robot ?f - roadTile ?t - parkingTile ?c - car)\n        :precondition (and\n            (IsAt ?r ?f)\n            (IsToTheLeftOf ?t ?f)\n            \n            (AwaitingDelivery ?c)\n            (IsAt ?c ?t)\n            \n            (not (exists (?c2 - car) (and\n                (IsCarrying ?r ?c2)\n            )))\n        )\n        :effect (and\n            (not (IsAt ?r ?f))\n            (IsAt ?r ?t)\n            \n            (not (IsAt ?c ?t))\n            (IsCarrying ?r ?c)\n        )\n    )\n\n)\n\n",F=";; Authors: Theodor Amariucai & Bora M. Alper (in no particular order)\n\n(define (problem parking)\n    (:domain finitech)\n    \n    (:objects\n        Robot - robot\n        Car1 - car\n        Car2 - car\n        Car3 - car\n        Car4 - car\n        Car5 - car\n        \n        R0C0 - blockedTile\n        R0C1 - parkingTile\n        R0C2 - roadTile\n        R0C3 - parkingTile\n        R1C0 - blockedTile\n        R1C1 - parkingTile\n        R1C2 - roadTile\n        R1C3 - parkingTile\n        R2C0 - hubTile\n        R2C1 - roadTile\n        R2C2 - roadTile\n        R2C3 - parkingTile\n        R3C0 - hubTile\n        R3C1 - roadTile\n        R3C2 - roadTile\n        R3C3 - parkingTile\n        R4C0 - hubTile\n        R4C1 - roadTile\n        R4C2 - roadTile\n        R4C3 - parkingTile\n        R5C0 - hubTile\n        R5C1 - roadTile\n        R5C2 - roadTile\n        R5C3 - parkingTile\n    )\n\n    (:init\n        (IsAt Robot R5C1)\n        (IsCarrying Robot Car4)\n        (IsAt Car1 R5C0)\n        (IsAt Car2 R4C0)\n        (IsAt Car3 R0C1)\n        (IsAt Car5 R0C3)\n        (AwaitingParking Car1)\n        (AwaitingParking Car2)\n        (AwaitingDelivery Car3)\n        (AwaitingDelivery Car4)\n        \n        (IsToTheLeftOf R0C0 R0C1)\n        (IsToTheLeftOf R0C1 R0C2)\n        (IsToTheLeftOf R0C2 R0C3)\n        (IsToTheLeftOf R1C0 R1C1)\n        (IsToTheLeftOf R1C1 R1C2)\n        (IsToTheLeftOf R1C2 R1C3)\n        (IsToTheLeftOf R2C0 R2C1)\n        (IsToTheLeftOf R2C1 R2C2)\n        (IsToTheLeftOf R2C2 R2C3)\n        (IsToTheLeftOf R3C0 R3C1)\n        (IsToTheLeftOf R3C1 R3C2)\n        (IsToTheLeftOf R3C2 R3C3)\n        (IsToTheLeftOf R4C0 R4C1)\n        (IsToTheLeftOf R4C1 R4C2)\n        (IsToTheLeftOf R4C2 R4C3)\n        (IsToTheLeftOf R5C0 R5C1)\n        (IsToTheLeftOf R5C1 R5C2)\n        (IsToTheLeftOf R5C2 R5C3)\n\n        (IsAbove R0C0 R1C0)\n        (IsAbove R0C1 R1C1)\n        (IsAbove R0C2 R1C2)\n        (IsAbove R0C3 R1C3)\n        (IsAbove R1C0 R2C0)\n        (IsAbove R1C1 R2C1)\n        (IsAbove R1C2 R2C2)\n        (IsAbove R1C3 R2C3)\n        (IsAbove R2C0 R3C0)\n        (IsAbove R2C1 R3C1)\n        (IsAbove R2C2 R3C2)\n        (IsAbove R2C3 R3C3)\n        (IsAbove R3C0 R4C0)\n        (IsAbove R3C1 R4C1)\n        (IsAbove R3C2 R4C2)\n        (IsAbove R3C3 R4C3)\n        (IsAbove R4C0 R5C0)\n        (IsAbove R4C1 R5C1)\n        (IsAbove R4C2 R5C2)\n        (IsAbove R4C3 R5C3)\n    )\n\n    (:goal (and\n        (not (exists (?c - car) (or\n            (AwaitingParking ?c)\n            (AwaitingDelivery ?c)\n        )))\n    ))\n)\n\n",H=n(90),J=n.n(H);function V(){return q.apply(this,arguments)}function q(){return(q=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"http://solver.planning.domains/solve-and-validate",method:"POST",contentType:"application/json",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({domain:W,problem:F})},e.next=3,J()(t).then((function(e){return"ok"===e.data.status?e.data.result.plan:-1}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){var n={i:t.x,j:t.y},a=[n];return e.forEach((function(e){e.name.includes("go-up")?(n={i:n.i-1,j:n.j},a.push(n)):e.name.includes("go-down")?(n={i:n.i+1,j:n.j},a.push(n)):e.name.includes("go-right")||e.name.includes("park-car-rightwards")||e.name.includes("retrieve-car-rightwards")?(n={i:n.i,j:n.j+1},a.push(n)):(e.name.includes("go-left")||e.name.includes("dropoff-car-leftwards")||e.name.includes("pickup-car-leftwards")||e.name.includes("park-car-leftwards")||e.name.includes("retrieve-car-leftwards"))&&(n={i:n.i,j:n.j-1},a.push(n))})),a}var Z=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(u.a)(t).call(this))).state={spacesAvailable:["R0C1","R1C1","R0C3","R1C3","R2C0","R3C0"],robotLocation:{x:0,y:4},robotPath:[{i:0,j:4},{i:2,j:4},{i:2,j:3},{i:2,j:3},{i:2,j:2},{i:2,j:1},{i:3,j:1}],debugMode:!1,gridSize:{x:5,y:4},settingsOn:!1,showAlert:!1},e.toggleSettings=e.toggleSettings.bind(Object(p.a)(e)),e.changeGridSize=e.changeGridSize.bind(Object(p.a)(e)),e}return Object(C.a)(t,e),Object(g.a)(t,[{key:"toggleSpaceAvailable",value:function(e){var t=Object(d.a)(this.state.spacesAvailable);t[e]=!t[e],this.setState({spacesAvailable:t})}},{key:"toggleDebugMode",value:function(){this.setState({debugMode:!this.state.debugMode})}},{key:"toggleSettings",value:function(){this.setState({settingsOn:!this.state.settingsOn})}},{key:"changeGridSize",value:function(e,t){this.setState({gridSize:{x:e,y:t}})}},{key:"replan",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:-1!==(t=e.sent)&&this.setState({robotPath:U(t,this.state.robotLocation)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setState({showAlert:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,null,r.a.createElement(j.a,{bg:"primary",variant:"dark",sticky:"top"},r.a.createElement(j.a.Brand,null,"Finitech Operations Monitor"),r.a.createElement(G.a,{className:"mr-auto"},r.a.createElement(P.a,{title:"Parking Lot",id:"collasible-nav-dropdown"},r.a.createElement(P.a.Item,{href:"#/"},"View"),r.a.createElement(P.a.Divider,null),r.a.createElement(P.a.Item,{onClick:function(){e.toggleDebugMode()}},"Debug Mode")),r.a.createElement(P.a,{title:"Cameras",id:"collasible-nav-dropdown"},r.a.createElement(P.a.Item,{href:"#/overhead"},"CCTV"),r.a.createElement(P.a.Item,{href:"#/onboard"},"Onboard")))),r.a.createElement(L.c,null,r.a.createElement(L.a,{path:"/overhead"},r.a.createElement(E,null)),r.a.createElement(L.a,{path:"/onboard"},r.a.createElement(O,null)),r.a.createElement(L.a,{path:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(D,{changeGridSize:this.changeGridSize,toggleSettings:this.toggleSettings,show:this.state.settingsOn}),r.a.createElement(x,{gridSize:this.state.gridSize,robotLocation:this.state.robotLocation,robotPath:this.state.robotPath,debugMode:this.state.debugMode,spacesAvailable:this.state.spacesAvailable}),r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:300,bottom:30,right:30}},r.a.createElement(B.a,{onClose:function(){return e.setState({showAlert:!1})},show:this.state.showAlert,delay:5e3,autohide:!0},r.a.createElement(B.a.Header,null,r.a.createElement(N.a,null),r.a.createElement("strong",{className:"mr-auto ml-2"},"Replanning..."),"just now"),r.a.createElement(B.a.Body,null,r.a.createElement("h6",{style:{color:"rgb(70, 70, 70)"}},"A new car has arrived! "))))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e){e.exports=JSON.parse('[{"x":0,"y":0,"type":"blocked"},{"x":1,"y":0,"type":"parking"},{"x":2,"y":0,"type":"road"},{"x":3,"y":0,"type":"parking"},{"x":0,"y":1,"type":"blocked"},{"x":1,"y":1,"type":"parking"},{"x":2,"y":1,"type":"road"},{"x":3,"y":1,"type":"parking"},{"x":0,"y":2,"type":"hub"},{"x":1,"y":2,"type":"road"},{"x":2,"y":2,"type":"road"},{"x":3,"y":2,"type":"parking"},{"x":0,"y":3,"type":"hub"},{"x":1,"y":3,"type":"road"},{"x":2,"y":3,"type":"road"},{"x":3,"y":3,"type":"parking"},{"x":0,"y":4,"type":"hub"},{"x":1,"y":4,"type":"road"},{"x":2,"y":4,"type":"road"},{"x":3,"y":4,"type":"parking"}]')}},[[103,1,2]]]);
//# sourceMappingURL=main.893e83e5.chunk.js.map